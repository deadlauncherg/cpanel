"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[558],{1558:(e,t,a)=>{a.d(t,{U:()=>F});var r=a(5155),s=a(2115),o=a(7168),n=a(9663),i=a(1305),l=a(3052),c=a(5196),d=a(9428),u=a(3999);let m=i.bL,f=i.l9;i.YJ,i.ZL,i.Pb,i.z6,s.forwardRef((e,t)=>{let{className:a,inset:s,children:o,...n}=e;return(0,r.jsxs)(i.ZP,{ref:t,className:(0,u.cn)("flex cursor-default gap-2 select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none focus:bg-accent data-[state=open]:bg-accent [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",s&&"pl-8",a),...n,children:[o,(0,r.jsx)(l.A,{className:"ml-auto"})]})}).displayName=i.ZP.displayName,s.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,r.jsx)(i.G5,{ref:t,className:(0,u.cn)("z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-lg data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",a),...s})}).displayName=i.G5.displayName;let p=s.forwardRef((e,t)=>{let{className:a,sideOffset:s=4,...o}=e;return(0,r.jsx)(i.ZL,{children:(0,r.jsx)(i.UC,{ref:t,sideOffset:s,className:(0,u.cn)("z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",a),...o})})});p.displayName=i.UC.displayName;let h=s.forwardRef((e,t)=>{let{className:a,inset:s,...o}=e;return(0,r.jsx)(i.q7,{ref:t,className:(0,u.cn)("relative flex cursor-default select-none items-center gap-2 rounded-sm px-2 py-1.5 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",s&&"pl-8",a),...o})});h.displayName=i.q7.displayName,s.forwardRef((e,t)=>{let{className:a,children:s,checked:o,...n}=e;return(0,r.jsxs)(i.H_,{ref:t,className:(0,u.cn)("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",a),checked:o,...n,children:[(0,r.jsx)("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:(0,r.jsx)(i.VF,{children:(0,r.jsx)(c.A,{className:"h-4 w-4"})})}),s]})}).displayName=i.H_.displayName,s.forwardRef((e,t)=>{let{className:a,children:s,...o}=e;return(0,r.jsxs)(i.hN,{ref:t,className:(0,u.cn)("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",a),...o,children:[(0,r.jsx)("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:(0,r.jsx)(i.VF,{children:(0,r.jsx)(d.A,{className:"h-2 w-2 fill-current"})})}),s]})}).displayName=i.hN.displayName,s.forwardRef((e,t)=>{let{className:a,inset:s,...o}=e;return(0,r.jsx)(i.JU,{ref:t,className:(0,u.cn)("px-2 py-1.5 text-sm font-semibold",s&&"pl-8",a),...o})}).displayName=i.JU.displayName;let g=s.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,r.jsx)(i.wv,{ref:t,className:(0,u.cn)("-mx-1 my-1 h-px bg-muted",a),...s})});g.displayName=i.wv.displayName;var x=a(7951),b=a(1007),v=a(381),w=a(5525),y=a(4835),j=a(2605),N=a(760),_=a(646),k=a(4861),S=a(1284),I=a(1243);function z(e){let{message:t,type:a,duration:o=5e3,onClose:n}=e;(0,s.useEffect)(()=>{let e=setTimeout(n,o);return()=>clearTimeout(e)},[o,n]);let i={success:(0,r.jsx)(_.A,{className:"w-5 h-5 text-green-400"}),error:(0,r.jsx)(k.A,{className:"w-5 h-5 text-red-400"}),info:(0,r.jsx)(S.A,{className:"w-5 h-5 text-blue-400"}),warning:(0,r.jsx)(I.A,{className:"w-5 h-5 text-yellow-400"})};return(0,r.jsx)(j.P.div,{initial:{opacity:0,y:-50,scale:.9},animate:{opacity:1,y:0,scale:1},exit:{opacity:0,y:-50,scale:.9},className:"fixed top-4 right-4 z-50 p-4 rounded-lg border backdrop-blur-xl ".concat({success:"border-green-500/50 bg-green-500/10",error:"border-red-500/50 bg-red-500/10",info:"border-blue-500/50 bg-blue-500/10",warning:"border-yellow-500/50 bg-yellow-500/10"}[a]," max-w-sm"),children:(0,r.jsxs)("div",{className:"flex items-center space-x-3",children:[i[a],(0,r.jsx)("p",{className:"text-white font-medium",children:t})]})})}var A=a(8915),D=a(5317),C=a(6874),R=a.n(C);function F(e){let{onLoginSuccess:t,onLogoutSuccess:a}=e,[i,l]=(0,s.useState)(null),[c,d]=(0,s.useState)(!1),{showToast:u,ToastContainer:j}=function(){let[e,t]=(0,s.useState)([]),a=e=>{t(t=>t.filter(t=>t.id!==e))};return{showToast:function(e){let a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"info",r=Math.random().toString(36).substr(2,9);t(t=>[...t,{id:r,message:e,type:a}])},ToastContainer:()=>(0,r.jsx)(N.N,{children:e.map(e=>(0,r.jsx)(z,{message:e.message,type:e.type,onClose:()=>a(e.id)},e.id))})}}();(0,s.useEffect)(()=>{let e=localStorage.getItem("discord_user");if(e)try{l(JSON.parse(e)),null==t||t()}catch(e){console.error("Error parsing saved user:",e),localStorage.removeItem("discord_user"),null==a||a()}},[]);let _=async()=>{d(!0);try{let e="1090917458346524734",r=encodeURIComponent(window.location.origin+"/auth/discord/callback"),s="1388084142075547680";if(!e||!r||!s){u("Discord client ID, redirect URI, or guild ID is not configured. Please check environment variables.","error"),d(!1);return}let o="https://discord.gg/NvTZqd2YKR".concat(e,"&redirect_uri=").concat(r,"&response_type=code&scope=identify%20email%20guilds.join&permissions=0&guild_id=").concat(s),n=window.open(o,"discord-auth","width=500,height=700,scrollbars=yes,resizable=yes");if(!n){u("Please allow popups for Discord authentication","error"),d(!1);return}let i=setInterval(()=>{if(null==n?void 0:n.closed){clearInterval(i);let e=localStorage.getItem("discord_auth");if(e)try{let a=JSON.parse(e);l(a),localStorage.setItem("discord_user",JSON.stringify(a)),localStorage.removeItem("discord_auth"),u("Welcome back, ".concat(a.username,"!"),"success"),null==t||t(),window.location.reload(),k(a),S(a.access_token)}catch(e){console.error("Error processing auth data:",e),u("Authentication failed. Please try again.","error"),null==a||a()}else u("Authentication was cancelled","info"),null==a||a();d(!1)}},1e3);setTimeout(()=>{(null==n?void 0:n.closed)||(null==n||n.close(),clearInterval(i),d(!1),u("Authentication timed out","error"),null==a||a())},3e5)}catch(e){console.error("Discord login error:",e),u("Failed to initiate Discord login","error"),d(!1)}},k=async e=>{try{let t=(0,D.H9)(A.db,"users",e.id);await (0,D.BN)(t,{id:e.id,username:e.username,email:e.email,avatar:e.avatar,lastLogin:new Date},{merge:!0}),console.log("User data saved to Firestore:",e.id)}catch(e){console.error("Error saving user to Firestore:",e)}},S=async e=>{try{let t="1388084142075547680";if(!t){console.warn("Discord guild ID not configured");return}let a=await fetch("/api/discord/join-server",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({access_token:e,guild_id:t})});if(a.ok)u("Successfully joined our Discord server!","success");else{let e=await a.json();console.error("Failed to join Discord server:",e),u("Logged in successfully, but couldn't auto-join Discord server","warning")}}catch(e){console.error("Error joining Discord server:",e),u("Logged in successfully, but couldn't auto-join Discord server","warning")}};return i?(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)(m,{children:[(0,r.jsx)(f,{asChild:!0,children:(0,r.jsx)(o.$,{variant:"ghost",className:"relative h-10 w-10 rounded-full",children:(0,r.jsxs)(n.eu,{className:"h-10 w-10 ring-2 ring-purple-500/50",children:[(0,r.jsx)(n.BK,{src:i.avatar?"https://cdn.discordapp.com/avatars/".concat(i.id,"/").concat(i.avatar,".png"):void 0,alt:i.username}),(0,r.jsx)(n.q5,{className:"bg-gradient-to-r from-purple-500 to-pink-500 text-white",children:i.username.charAt(0).toUpperCase()})]})})}),(0,r.jsxs)(p,{className:"w-56 bg-black/90 border-white/20 backdrop-blur-xl",align:"end",forceMount:!0,children:[(0,r.jsx)("div",{className:"flex items-center justify-start gap-2 p-2",children:(0,r.jsxs)("div",{className:"flex flex-col space-y-1 leading-none",children:[(0,r.jsxs)("p",{className:"font-medium text-white flex items-center",children:[i.username,(0,r.jsx)(x.A,{className:"w-4 h-4 ml-2 text-yellow-500"})]}),(0,r.jsx)("p",{className:"text-xs text-white/70",children:i.email})]})}),(0,r.jsx)(g,{className:"bg-white/20"}),(0,r.jsx)(R(),{href:"/profile",children:(0,r.jsxs)(h,{className:"text-white hover:bg-white/10 cursor-pointer",children:[(0,r.jsx)(b.A,{className:"mr-2 h-4 w-4"}),"Profile"]})}),(0,r.jsxs)(h,{className:"text-white hover:bg-white/10",children:[(0,r.jsx)(v.A,{className:"mr-2 h-4 w-4"}),"Settings"]}),(0,r.jsxs)(h,{className:"text-white hover:bg-white/10",children:[(0,r.jsx)(w.A,{className:"mr-2 h-4 w-4"}),"Premium Features"]}),(0,r.jsx)(g,{className:"bg-white/20"}),(0,r.jsxs)(h,{className:"text-red-400 hover:bg-red-500/10",onClick:()=>{l(null),localStorage.removeItem("discord_user"),u("Successfully logged out","info"),null==a||a()},children:[(0,r.jsx)(y.A,{className:"mr-2 h-4 w-4"}),"Log out"]})]})]}),(0,r.jsx)(j,{})]}):(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)(o.$,{onClick:_,disabled:c,className:"bg-[#5865F2] hover:bg-[#4752C4] text-white relative overflow-hidden group",children:[c?(0,r.jsx)("div",{className:"w-4 h-4 border-2 border-white/30 border-t-white rounded-full animate-spin mr-2"}):(0,r.jsx)("svg",{className:"w-5 h-5 mr-2",viewBox:"0 0 24 24",fill:"currentColor",children:(0,r.jsx)("path",{d:"M20.317 4.37a19.791 19.791 0 0 0-4.885-1.515a.074.074 0 0 0-.079.037c-.21.375-.444.864-.608 1.25a18.27 18.27 0 0 0-5.487 0a12.64 12.64 0 0 0-.617-1.25a.077.077 0 0 0-.079-.037A19.736 19.736 0 0 0 3.677 4.37a.07.07 0 0 0-.032.027C.533 9.046-.32 13.58.099 18.057a.082.082 0 0 0 .031.057a19.9 19.9 0 0 0 5.993 3.03a.078.078 0 0 0 .084-.028a14.09 14.09 0 0 0 1.226-1.994a.076.076 0 0 0-.041-.106a13.107 13.107 0 0 1-1.872-.892a.077.077 0 0 1-.008-.128a10.2 10.2 0 0 0 .372-.292a.074.074 0 0 1 .077-.01c3.928 1.793 8.18 1.793 12.062 0a.074.074 0 0 1 .078.01c.12.098.246.198.373.292a.077.077 0 0 1-.006.127a12.299 12.299 0 0 1-1.873.892a.077.077 0 0 0-.041.107c.36.698.772 1.362 1.225 1.993a.076.076 0 0 0 .084.028a19.839 19.839 0 0 0 6.002-3.03a.077.077 0 0 0 .032-.054c.5-5.177-.838-9.674-3.549-13.66a.061.061 0 0 0-.031-.03zM8.02 15.33c-1.183 0-2.157-1.085-2.157-2.419c0-1.333.956-2.419 2.157-2.419c1.21 0 2.176 1.096 2.157 2.42c0 1.333-.956 2.418-2.157 2.418zm7.975 0c-1.183 0-2.157-1.085-2.157-2.419c0-1.333.955-2.419 2.157-2.419c1.21 0 2.176 1.096 2.157 2.42c0 1.333-.946 2.418-2.157 2.418z"})}),c?"Connecting...":"Login with Discord",(0,r.jsx)("div",{className:"absolute inset-0 bg-gradient-to-r from-purple-600/20 to-pink-600/20 opacity-0 group-hover:opacity-100 transition-opacity"})]}),(0,r.jsx)(j,{})]})}},3999:(e,t,a)=>{a.d(t,{cn:()=>o});var r=a(2596),s=a(9688);function o(){for(var e=arguments.length,t=Array(e),a=0;a<e;a++)t[a]=arguments[a];return(0,s.QP)((0,r.$)(t))}},7168:(e,t,a)=>{a.d(t,{$:()=>c});var r=a(5155),s=a(2115),o=a(9708),n=a(2085),i=a(3999);let l=(0,n.F)("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),c=s.forwardRef((e,t)=>{let{className:a,variant:s,size:n,asChild:c=!1,...d}=e,u=c?o.DX:"button";return(0,r.jsx)(u,{className:(0,i.cn)(l({variant:s,size:n,className:a})),ref:t,...d})});c.displayName="Button"},8915:(e,t,a)=>{a.d(t,{db:()=>l,j:()=>i});var r=a(3915),s=a(5404),o=a(5317);let n=(0,r.Dk)().length?(0,r.Sx)():(0,r.Wp)({apiKey:"AIzaSyD-SFjagJIKFag9ybire32cxtoGkqA-zCw",authDomain:"project-2-78c26.firebaseapp.com",projectId:"project-2-78c26",storageBucket:"project-2-78c26.firebasestorage.app",messagingSenderId:"986493431540",appId:"1:986493431540:web:d8beb75bc460727a6678a1",measurementId:"G-GYDV1HEZRV"}),i=(0,s.xI)(n),l=(0,o.aU)(n)},9663:(e,t,a)=>{a.d(t,{BK:()=>l,eu:()=>i,q5:()=>c});var r=a(5155),s=a(2115),o=a(4011),n=a(3999);let i=s.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,r.jsx)(o.bL,{ref:t,className:(0,n.cn)("relative flex h-10 w-10 shrink-0 overflow-hidden rounded-full",a),...s})});i.displayName=o.bL.displayName;let l=s.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,r.jsx)(o._V,{ref:t,className:(0,n.cn)("aspect-square h-full w-full",a),...s})});l.displayName=o._V.displayName;let c=s.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,r.jsx)(o.H4,{ref:t,className:(0,n.cn)("flex h-full w-full items-center justify-center rounded-full bg-muted",a),...s})});c.displayName=o.H4.displayName}}]);